package dao;

import model.Exercise;
import util.DBConnection;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.List;

public class ExerciseDAO {
    public List<Exercise> getExercisesByLessonId(int lessonId) {
        List<Exercise> exercises = new ArrayList<>();
        String query = "SELECT exercise_id, exercise_name, exercise_link FROM Exercises WHERE lesson_id = ?";
        try (Connection conn = DBConnection.getConnection();
             PreparedStatement stmt = conn.prepareStatement(query)) {
            stmt.setInt(1, lessonId);
            ResultSet rs = stmt.executeQuery();
            while (rs.next()) {
                Exercise exercise = new Exercise();
                exercise.setExerciseId(rs.getInt("exercise_id"));
                exercise.setExerciseName(rs.getString("exercise_name"));
                exercise.setExerciseLink(rs.getString("exercise_link"));
                exercises.add(exercise);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        return exercises;
    }
}
